<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>231 Gates — LuminaNexus</title>
  <meta name="description" content="The 231 Gates of Light — Hebrew letter pairings (22 choose 2) with Torah-first study intent." />
  <link rel="stylesheet" href="/styles/main.css" />
</head>

<body class="with-glow">
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="site-header"></header>

  <main id="main" class="wrap" style="padding-top:18px;">
    <section class="card" style="margin-top: 18px;">
      <div class="card-tag">231 GATES · <span class="hebrew-inline">רל״א שערים</span></div>
      <h1>The 231 Gates of Light</h1>
      <p class="muted">All 231 unique Hebrew letter pairings (22 choose 2). Torah-first, source-first.</p>

      <!-- ================= KAVANAH REQUIRED ================= -->
      <div id="gateRequire" class="card" style="margin-top:14px; display:none;">
        <div class="card-tag">KAVANAH REQUIRED · <span class="hebrew-inline">כוונה</span></div>
        <p>
          Please set kavanah first before entering the Gates.
          <span class="hebrew-inline">אנא קבע כוונה תחילה לפני הכניסה לשערים.</span>
        </p>
        <a class="btn primary" href="/pages/orientation.html?dest=231">Set Kavanah →</a>
      </div>

      <!-- ================= GATE APP (VISIBLE AFTER KAVANAH) ================= -->
      <div id="gateApp" style="display:none; margin-top:14px;">

        <!-- ================= FEATURED GATES (BLURBS + LINKS) ================= -->
        <div class="card" style="margin-top:0;">
          <div class="card-tag">FEATURED GATES · <span class="hebrew-inline">שערים מובחרים</span></div>
          <p class="muted" style="margin-top:8px;">
            Completed gates (each gate page stays minimal: orientation → sources → boundary → one question).
          </p>

          <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:12px; margin-top:12px;">
            <article class="card" style="margin:0;">
              <div class="card-tag">GATE · <span class="hebrew-inline">שער</span></div>
              <h3 style="margin-top:6px;">
                <span class="hebrew-inline">א–ב</span> · Aleph–Bet
              </h3>
              <p class="muted" style="margin-top:8px;">
                From Oneness to House — how unity becomes a bounded place for meaning.
              </p>
              <p class="hebrew" style="margin-top:6px;">
                מאחדות לבית — כיצד האחד נעשה מקום מוגבל למשמעות.
              </p>
              <a class="btn primary" href="/pages/gates/aleph-bet.html" style="margin-top:10px;">Open Gate Page →</a>
            </article>

            <article class="card" style="margin:0;">
              <div class="card-tag">GATE · <span class="hebrew-inline">שער</span></div>
              <h3 style="margin-top:6px;">
                <span class="hebrew-inline">א–ג</span> · Aleph–Gimel
              </h3>
              <p class="muted" style="margin-top:8px;">
                From Oneness to Giving — unity expressed as restrained generosity, not status.
              </p>
              <p class="hebrew" style="margin-top:6px;">
                מאחדות לגמילות חסדים — אחדות כנתינה מרוסנת, לא כמעמד.
              </p>
              <a class="btn primary" href="/pages/gates/aleph-gimel.html" style="margin-top:10px;">Open Gate Page →</a>
            </article>
          </div>
        </div>

        <!-- ================= KAVANAH SUMMARY ================= -->
        <div class="card" style="margin-top:14px;">
          <div class="card-tag">KAVANAH · <span class="hebrew-inline">כוונה</span></div>
          <h3 style="margin-top:6px;">Your saved Gate settings</h3>

          <pre id="gateSettings" style="white-space:pre-wrap; margin-top:10px; opacity:.95;"></pre>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px;">
            <a class="btn ghost" href="/pages/orientation.html?dest=231">Change Kavanah →</a>
            <a class="btn ghost" href="/pages/chavruta.html">Go to Chavruta →</a>
          </div>
        </div>

        <!-- ================= GATES LIST ================= -->
        <div class="card" style="margin-top:14px;">
          <div class="card-tag">GATES LIST · <span class="hebrew-inline">שערים</span></div>

          <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px;">
            <input id="gateSearch" type="text" placeholder="Search letters or pair (e.g., אב, aleph, bet)..." style="flex:1; min-width:220px;" />
            <span class="muted" id="gateCount"></span>
          </div>

          <div id="gateGrid" style="margin-top:12px; display:flex; flex-wrap:wrap; gap:8px;"></div>
        </div>

        <!-- ================= SELECTED GATE (BLURB + LINK) ================= -->
        <div class="card" style="margin-top:14px;">
          <div class="card-tag">SELECTED GATE · <span class="hebrew-inline">שער נבחר</span></div>

          <h3 id="selectedTitle" style="margin-top:6px;">Select a gate to open it.</h3>

          <div id="selectedBody" class="muted" style="margin-top:10px;">
            Click any pair above. If a blurb exists, it will appear here. If the gate page exists, you can open it directly.
          </div>

          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
            <a id="selectedOpenGate" class="btn primary" href="#" style="display:none;">Open Gate Page →</a>
            <a id="selectedToChavruta" class="btn ghost" href="/pages/chavruta.html">Bring this gate to Chavruta →</a>
            <a class="btn ghost" href="/pages/library.html">Open Library →</a>
          </div>
        </div>

      </div>
    </section>
  </main>

  <footer class="site-footer"></footer>

  <script src="/scripts/nav-active.js" defer></script>
  <script src="/scripts/231-gates.js" defer></script>

  <!-- ================= BLURB + LINK ENHANCER (OPTION A) ================= -->
  <script>
  (function () {
    // Blurby index lives here; gate pages remain minimal.
    // Add entries progressively as blurbs/pages are created.
    const GATE_INFO = {
      // Completed gate pages
      "אב": {
        enTitle: "Gate א–ב · Aleph–Bet",
        enBlurb: "From Oneness to House — how unity becomes a bounded place for meaning.",
        heBlurb: "מאחדות לבית — כיצד האחד נעשה מקום מוגבל למשמעות.",
        href: "/pages/gates/aleph-bet.html"
      },
      "אג": {
        enTitle: "Gate א–ג · Aleph–Gimel",
        enBlurb: "From Oneness to Giving — unity expressed as restrained generosity, not status.",
        heBlurb: "מאחדות לגמילות חסדים — אחדות כנתינה מרוסנת, לא כמעמד.",
        href: "/pages/gates/aleph-gimel.html"
      },

      // Aleph row blurbs (foundation set; pages may be added later)
      "אד": {
        enTitle: "Gate א–ד · Aleph–Dalet",
        enBlurb: "From Oneness to Need — how unity encounters lack without domination.",
        heBlurb: "מאחדות לדלות — כיצד האחד פוגש חסר בלי שליטה."
      },
      "אה": {
        enTitle: "Gate א–ה · Aleph–Heh",
        enBlurb: "From Oneness to Breath — how unity allows space for emergence.",
        heBlurb: "מאחדות לה״א — כיצד האחד יוצר מרווח להופעה."
      },
      "או": {
        enTitle: "Gate א–ו · Aleph–Vav",
        enBlurb: "From Oneness to Connection — how unity becomes a joining line, not a chain.",
        heBlurb: "מאחדות לו״ו — כיצד האחד נעשה חיבור, לא כביל."
      },
      "אז": {
        enTitle: "Gate א–ז · Aleph–Zayin",
        enBlurb: "From Oneness to Struggle — how unity faces conflict without becoming violence.",
        heBlurb: "מאחדות לז״ין — כיצד האחד פוגש מאבק בלי להידרדר לאלימות."
      },
      "אח": {
        enTitle: "Gate א–ח · Aleph–Chet",
        enBlurb: "From Oneness to Boundary — how unity creates enclosure without suffocation.",
        heBlurb: "מאחדות לחֵית — כיצד האחד יוצר גבול בלי חנק."
      },
      "אט": {
        enTitle: "Gate א–ט · Aleph–Tet",
        enBlurb: "From Oneness to Containment — how unity holds what is hidden without forcing it open.",
        heBlurb: "מאחדות לטֵית — כיצד האחד מחזיק נסתר בלי כפייה."
      },
      "אי": {
        enTitle: "Gate א–י · Aleph–Yod",
        enBlurb: "From Oneness to Point — how unity concentrates without collapsing.",
        heBlurb: "מאחדות ליו״ד — כיצד האחד מתכנס בלי להישבר."
      },
      "אכ": {
        enTitle: "Gate א–כ · Aleph–Kaf",
        enBlurb: "From Oneness to Measure — how unity takes form through restraint.",
        heBlurb: "מאחדות לכ״ף — כיצד האחד נמדד באמצעות ריסון."
      },
      "אל": {
        enTitle: "Gate א–ל · Aleph–Lamed",
        enBlurb: "From Oneness to Learning — how unity becomes disciplined study, not self-display.",
        heBlurb: "מאחדות ללימוד — כיצד האחד נעשה לימוד מרוסן, לא הצגה."
      },
      "אמ": {
        enTitle: "Gate א–מ · Aleph–Mem",
        enBlurb: "From Oneness to Waters — how unity holds depth without flooding the mind.",
        heBlurb: "מאחדות למים — כיצד האחד מחזיק עומק בלי להציף."
      },
      "אנ": {
        enTitle: "Gate א–נ · Aleph–Nun",
        enBlurb: "From Oneness to Falling — how unity meets descent without despair.",
        heBlurb: "מאחדות לנפילה — כיצד האחד פוגש ירידה בלי ייאוש."
      },
      "אס": {
        enTitle: "Gate א–ס · Aleph–Samekh",
        enBlurb: "From Oneness to Support — how unity becomes steadying help, not dependence.",
        heBlurb: "מאחדות לסמך — כיצד האחד נעשה תמיכה יציבה, לא תלות."
      },
      "אע": {
        enTitle: "Gate א–ע · Aleph–Ayin",
        enBlurb: "From Oneness to Seeing — how unity trains the eye without turning into certainty.",
        heBlurb: "מאחדות לראייה — כיצד האחד מחנך את העין בלי להפוך לוודאות."
      },
      "אפ": {
        enTitle: "Gate א–פ · Aleph–Pe",
        enBlurb: "From Oneness to Speech — how unity speaks carefully and refuses exaggeration.",
        heBlurb: "מאחדות לדיבור — כיצד האחד מדבר בזהירות ומסרב להפרזה."
      },
      "אצ": {
        enTitle: "Gate א–צ · Aleph–Tsadi",
        enBlurb: "From Oneness to Integrity — how unity aligns action with justice, not image.",
        heBlurb: "מאחדות ליושר — כיצד האחד מיישר מעשה עם צדק, לא עם דימוי."
      },
      "אק": {
        enTitle: "Gate א–ק · Aleph–Qof",
        enBlurb: "From Oneness to Holiness — how unity separates what is common from what is set-apart.",
        heBlurb: "מאחדות לקדושה — כיצד האחד מבדיל בין חול לקודש."
      },
      "אר": {
        enTitle: "Gate א–ר · Aleph–Resh",
        enBlurb: "From Oneness to Beginning — how unity returns to first principles instead of novelty.",
        heBlurb: "מאחדות לראשית — כיצד האחד חוזר ליסודות ולא לרדיפת חידוש."
      },
      "אש": {
        enTitle: "Gate א–ש · Aleph–Shin",
        enBlurb: "From Oneness to Fire — how unity refines passion into service, not heat.",
        heBlurb: "מאחדות לאש — כיצד האחד מזכך להט לשירות, לא לשריפה."
      },
      "את": {
        enTitle: "Gate א–ת · Aleph–Tav",
        enBlurb: "From Oneness to Completion — how unity becomes fidelity over time, not intensity.",
        heBlurb: "מאחדות לתם — כיצד האחד נעשה נאמנות לאורך זמן, לא התלהבות רגעית."
      }
    };

    function normalizePair(text) {
      if (!text) return "";
      // Keep only Hebrew letters (so "א–ב", "אב", etc. normalize to "אב")
      return String(text).replace(/[^\u0590-\u05FF]/g, "").trim();
    }

    function renderSelected(pair) {
      const selectedTitle = document.getElementById("selectedTitle");
      const selectedBody = document.getElementById("selectedBody");
      const selectedOpenGate = document.getElementById("selectedOpenGate");
      if (!selectedTitle || !selectedBody || !selectedOpenGate) return;

      const info = GATE_INFO[pair];

      if (info) {
        selectedTitle.textContent = info.enTitle || (`Gate ${pair}`);

        selectedBody.innerHTML = `
          <p style="margin:0 0 8px 0;">${info.enBlurb || ""}</p>
          <p class="hebrew" style="margin:0;">${info.heBlurb || ""}</p>
        `;

        if (info.href) {
          selectedOpenGate.href = info.href;
          selectedOpenGate.style.display = "inline-flex";
        } else {
          selectedOpenGate.href = "#";
          selectedOpenGate.style.display = "none";
        }
      } else {
        selectedTitle.textContent = pair ? `Gate ${pair}` : "Select a gate to open it.";
        selectedBody.innerHTML = pair
          ? `<p style="margin:0;">Blurb not yet written for <span class="hebrew-inline">${pair}</span>. Gate page coming soon.</p>
             <p class="hebrew" style="margin:6px 0 0 0;">טרם נכתב תקציר לשער <span class="hebrew-inline">${pair}</span>. דף השער יתווסף בהמשך.</p>`
          : `Click any pair above. If a blurb exists, it will appear here. If the gate page exists, you can open it directly.`;

        selectedOpenGate.href = "#";
        selectedOpenGate.style.display = "none";
      }
    }

    // Enhance clicks on the gate grid even if it is rendered by external JS.
    document.addEventListener("click", function (e) {
      const target = e.target;
      if (!target || !target.closest) return;

      const withinGrid = target.closest("#gateGrid");
      if (!withinGrid) return;

      const clickable = target.closest("button, a, .pill, .btn, span, div");
      if (!clickable) return;

      const pair = normalizePair(clickable.textContent || clickable.innerText || "");
      if (pair) renderSelected(pair);
    }, true);
  })();
  </script>
</body>
</html>
